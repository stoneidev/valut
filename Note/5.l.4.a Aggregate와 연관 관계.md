모델 내에서 복잡한 연관관계를 맺는 객체를 대상으로 변경의 일관성을 보장하기란 쉽지 않다. 그 까닭은 단지 개별 객체만이 아닌 서로 밀접한 관계에 있는 객체 집합에도 불변식이 적용돼야 하기 때문이다. 그렇다고 변경의 일관성을 보장하고자 신중 잠금 기법을 쓴다면 다수의 사용자가 서로 부적절하게 간섭해서 시스템이 사용할 수 없는 상태가 될 것이다. 

이런 문제가 균형 잡힌 해법을 찾으려면 도메인을 심층적으로 이해해야 하며, 특히 이 경우에는 특정 클래스 인스턴스 사이의 변화 빈도와 같은 사항까지 이해하고 있어야 한다. 우리는 경합이 높은 지점을 느슨하게 하고, 엄격한 불변식을 더욱 엄격하게 지켜지게 하는 모델을 찾을 필요가 있다.

-------

처음에 JPA를 배운 사람들이라면 복잡한 연관관계를 맺고자 힘쓴다. 하지만 IDDD에서도 그렇고 상식적으로도 그렇고 Aggregate는 불변식이 유지되어야 하는 바운더리이기 때문에 한번의 트랙잭션으로 처리가 된다. 때문에 복잡한 연관관계를 맺고 있는 객체에 대해서 트랙잭션 바운더리가 커지게 된다. 직접적으로 이는 성능에 좋은 영향을 미지치지 않는다. 또한 이로 인하여 DB가 LOCK이 걸리는 상황이 자주 발생하게 된다. 많은 고객들이 이러한 어려움을 겪고 있다. Aggregate를 설계할 때 Aggregate의 바운더리를 생각하는 것은 매우 중요한 일이다. 

Referenced By : [[도메인 주도 설계]]