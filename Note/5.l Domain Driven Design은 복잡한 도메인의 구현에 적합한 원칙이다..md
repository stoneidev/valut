## 전략적 설계

도메인 주도 설계 방법론(Domain-Driven Design)은 크게 두 가지 주요 부분으로 나눌 수 있다. 바로 전략적 설계와 전술적 설계다. DDD의 전략적인 측면은 '무엇?'과 '왜?' 라는 질문에 대한 정답을 찾는 것이다. 즉 우리가 어떤 소프트웨어를 만드는지, 그리고 왜 소프트웨어를 만드는지에 대한 해답을 찾는 것이다. 다음으로 전술적 측면은 '어떻게?'라는 방법에 대한 것이다. 즉, 소프트웨어 각각의 구성요소가 구현되는 방법을 찾는 것이다.

### 1. 비즈니스 도메인 분석하기

효과적인 솔루션을 설계하고 구축하기 위해서는 그것의 바탕이 되는 문제를 이해해야 한다. 여기서 문제란 우리가 구축해야 하는 소프트웨어 시스템을 말한다. 해결하고자 하는 문제를 이해하려면 그것이 존재하는 맥락을 이해해야 한다. 

#### 비즈니스 도메인이란?
비즈니스 도메인은 기업의 주요 활동 영역을 정의한다. 읿반적으로 말하자면 회사가 고객에게 제공하는 서비스를 말한다. 

> “Domain” in Domain-Driven Design officially refers to a “sphere of knowledge and activity around which the application logic revolves”. In other words, the “Domain” is what is commonly referred to as “business logic” in the software world.

#### 하위 도메인이란?
비즈니스 도메인의 목표를 달성하기 위해 기업은 여러 가지 하위 도메인을 운영 해야 한다. 하위 도메인은 비즈니스 활동의 세분화된 영역이다. 모든 회사의 하위 도메인은 고객에게 제공하는 서비스 단위로 비즈니스 도메인을 만들다. 하나의 하위 도메인을 만드는 것만으로는 회사가 성공하기 어렵다. 하위 도메인은 전체 시스템에서 하나의 구성요소일 뿐이다. 각각의 하위 도메인은 회사의 비즈니스 도메인에서 목표를 달성하기 위해 서로 상호작용해야 한다. 
##### 하위 도메인 유형
도메인 주도 설계에서 하위 도메인은 핵심, 일반, 지원의 세 가지 유형으로 구분한다.

- 핵심 하위 도메인
  핵심 하위 도메인은 회사가 경쟁업체와 다르게 수행하고 있는 것을 말한다. 가령 새로운 제품이나 서비스를 발명하거나 기존 프로세스를 최적화하여 비용을 줄이는 것이 그렇다. ==핵심 하위 도메인은 수익에 영향을 미친다.==  경쟁력을 유지하기 위한 핵심 하위도메인에는 발명이나 스마트 최적화, 비즈니스 노하우, 또는 다른 지적 재산이 포함된다. 
	- 복잡성
	  구현하기 쉬운 핵심 도메인은 일시적인 경쟁 우위만을 제공할 수 있다. 따라서 핵심 하위 도메인은 자연스럽게 복잡해진다. 
	- 경재 우위의 원천
	  핵심 하위 도메인에 반드시 기술이 들어가야 하는 것은 아님을 알아야 한다. 모든 비즈니스 문제가 알고리즘이나 기술 솔루션으로 해결되지는 않는다. 회사의 경쟁 우위는 다양한 원천에서 나올 수 있다. 
- 일반 하위 도메인
  일반 하위 도메인은 모든 회사가 같은 방식으로 수행하는 비즈니스 활동을 말한다. 핵심 하위 도메인과 마찬가지로 일반 하위 도메인은 일반적으로 복잡하고 구현하기 어렵다. 그러나 일반 하위 도메인은 회사에 경쟁력을 제공하지 않는다. 이미 실무에서 검증된 솔루션으로 널리 이용 가능하며, 모든 회사에서 사용하고 있어서 더 이상 혁신이나 최적화가 필요없다. 
- 지원 하위 도메인
  이름에서 알 수 있듯이 지원 하위 도메인은 회사의 비즈니스를 지원하는 활동을 말한다. 그러나 핵심 하위 도메인과는 달리 지원 하위 도메인은 어떠한 경쟁 우위도 제공하지 않는다. 지원 하위 도메인의 차별되는 특징은 솔루션의 비즈니스 로직의 복잡성이다. 지원 하위 도메인은 간단하다. 지원 하위 도메인의 비즈니스 로직은 대부분 데이터 입력과 ETL 작업과 유사하다. 이는 소위 말하는 CRUD 인터페이스를 말한다. 이런 활동 여역은 회사에 어떠한 경쟁 우위도 제공하지 않으므로 높은 진입 장벽이 필요하지 않다.  
##### 하위 도메인 비교
- 경쟁 우위
  핵심 하위 도메인 만이 회사에 경쟁 우위를 제공한다. 핵심 하위 도메인은 경쟁사와 차별화 하기 위한 회사의 전략이다. 
- 복잡성
  핵심 하위 도메인은 복잡하다. 회사의 수익성이 좌우되기 때문에 경쟁업체가 최대한 모방하기 어려워야 한다. 그래서 회사는 전략적으로 핵심 하위 도메인으로 복잡한 문제를 해결하려고 한다. 때때로 핵심 하위 도메인과 지원 하위 도메인을 구별하는 것이 어려울 수 있다. 이때 복잡성은 도메인을 구별하는 유용한 지침이 된다. 하위 도메인을 부업으로 전활할 수 있는지 물어보자. 기꺼이 비용을 지불할 의사가 있는가? 그렇다면 이것은 핵심 하위 도메인이다. 
- 변동성
  핵심 하위 도메인은 자주 변경될 수 있다. 한 번의 시도로 문제가 해결될 수 있다면 경쟁자들고 빠르게 따라잡을 수 있기 때문에 아마도 경쟁 우위에서 좋은 위치는 아닐 것이다. 결과적으로 핵심 하위 도메인에 대한 솔루션을 찾을 수는 있다. 
  
  핵심 하위 도메인과 달리 지원 하위 도메인은 자주 변경되지 않는다. 지원 하위 도메인은 기업에 어떠한 경쟁 우위도 제공하지 않기 때문에 지원 하위 도메인의 개선은 핵심 하위 도메인에 투자한 동일한 노력에 비해 아주 작은 비즈니스 가치를 제공한다. 
- 솔루션 전략
  핵심 하위 도메인은 사내에서 구현되어야 한다. 핵심 하위 도메인은 솔루션을 구매하거나 외부에서 도입할 수 없다. 그럴 경우 경쟁업체들이 똑같이 할 수 있기 때문에 경쟁 우위 개념을 약화 시킬 것이다. 또한 핵심 하위 도메인 구현을 하청하는 것도 현명하지 않다. 핵심 하위 도메인 구현은 전략적인 투자다. 
  
  핵심 하위 도메인의 요구사항은 자주 그리고 지속적으로 변경될 것으로 예상되므로 솔루션은 유지보수가 가능하고 쉽게 개선될 수 있어야 한다. 따라서 핵심 하위 도메인은 가장 진보된 엔지니어링 기술로 구현해야 한다. 일반 하위 도메인은 어렵지만 이미 문제가 해결되었기 때문에 일반 하위 도메인을 사내에서 구현하는 데 시간과 노력을 투자하는 것보다 이미 만들어진 제품을 구입하거나 오픈소스 솔루션을 채택하는 것이 비용 면에서 더 효율적이다. 

 | 하위 도메인 유형 | 경쟁 우위 | 복잡성 | 변동성 | 구현 방식 | 문제 |
| ---- | ---- | ---- | ---- | ---- | ---- |
| 핵심 | 예 | 높음 | 높은 | 사내 개발 | 흥미로움 |
| 일반 | 아니오 | 높은 | 낮음 | 구매/도입 | 해결됨 |
| 지원 | 아니오 | 낮음 | 낮음 | 사내 개발/하청 | 뻔함 |
##### 하위 도메인 경계 식별
하위 도메인과 그 유형은 기업의 비즈니스 전략에 따라 정의되며, 이는 동일한 분야에서 다른 회사와 경쟁하기 위해 자신을 차별화 하는 방법인다. 대다수의 소프트웨어 프로젝트에서 하위 도메인은 어떤 식으로든 '이미 존재'한다. 회사의 부서와 기타 조직 단위는 좋은 출발점이다. 예를 들어, 온라인 쇼핑물이라면 창고, 고객, 서비스, 출고, 배송, 품질 관리, 채널 관리 부서 등이 포함될 수 있다. 
- 하위 도메인 정제
  크게 나눈 하위 도메인은 좋은 출발점이지만, 문제는 세부 사항에 있다. 비즈니스 기능의 복잡한 내용에 숨겨진 중요한 정보를 놓치지 않아야 한다. 세부적인 통찰력을 얻기 위해 무한정 파헤칠 수는 없다. 도대체 언제 멈춰야 할까?
- 응집되 유스케이스를 하위 도메인으로
  기술적인 관점에서 하위 도메인은 상호 연관되고 응집되 유스케이스의 집합과 유사하다. 이러한 유스케이스 집합에서는 보통 동일한 행위자, 비즈니스 엔티티를 포함하고 모두 밀접하게 관련된 데이터의 집합을 다룬다. 
  세분화된 하위 도메인을 찾는 것을 중단하는 시점을 결정하기 위한 지침으로 '응집된 유스케이스의 집합인 하위 도메인'이라는 정의를 사용할 수 있다. 이것은 하위 도메인의 가장 정확한 경계가 된다.
  지원 및 일반 하위 도메인의 경우에는 이러한 정제 작업을 다소 완화할 수 있다. 더 자세히 살펴봐도 소프트웨어 설계와 관련된 의사결정을 내리는 데 도움이 될 수 있는 새로운 통찰이 나오지 않으면 중단하는 것이 좋다. 
- 핵심에 집중
  하위 도메인을 찾을 때 소프트웨어와 관련되지 않는 비즈니스 기능을 식별하고, 그 자체로 인정하며, 작업 중인 소프트웨어 시스템과 관련된 비즈니스에 집중하는 것이 중요하다. 
#### 도메인 전문가는 어떤 사람인가?
도메인 전문가는 우리가 모뎅링하고 코드로 구현할 비즈니스의 모든 복잡성을 알고 있는 주제 전문가이다. 즉 조메인 전문가는 소프트웨어의 비즈니스 도메인에 대한 권위자이다. 도메인 전문가는 비즈니스를 대표한다. 그들은 모든 비즈니스 지식의 근원이 되는 비즈니스 문제를 처음으로 파악한 사람들이다. 시스템 분석가와 엔지니어는 비즈니스 도메인 메탈 모델을 소프트웨어 요구사항과 소스코드로 변환한다. 
일반적으로 도메인 전문가는 요구 사항을 제시하는 사람 또는 소프트웨어의 최종 사용자이다. 소프트웨어는 그들의 문제를 해결한다. 

### 2.도메인 지식 찾아내기
### 3. 도메인 복잡성 관리
### 4.바운디드 컨텍스트 연동

## 전술적 설계
### 5. 간단한 비즈니스 로직 구현
### 6. 복잡한 비즈니스 로직 다루기
### 7. 시간 차원의 모델링
### 8. 아키텍처 패턴
### 9. 커뮤니케이선 패턴

## 도메인 주도 설계 적용 실무
### 10. 휴리스틱 설계
### 11. 진화하는 설계 의사 결정
### 12. 이벤트 스토밍
### 13. 실무에서의 도메인 주도 설계

## 다른 방법론 및 패턴과의 관계
### 14. 마이크로서비스
### 15. 이벤트 주도 아키텍처
### 16. 데이터 메시